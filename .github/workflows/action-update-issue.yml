name: Update issue

on:
  issues:
    types: closed
    
jobs:
  Manage-Issues:
    runs-on: ubuntu-latest
    name: Close and Open issue
    if: ${{ github.context.issue.number <= 7 }}
    
    steps:
      - name: Close and Open issue
        uses: actions/github-script@v5
        with:
          script: |
            // Close this issue
            github.rest.issues.update({
              owner: "bryant-github-universe-2021",
              repo: "GitHubUniverse2021-NA",
              issue_number: context.issue.number,
              state: "closed"
            })
            
            echo "Context: " + context.issue
            
      - name: Open a issue
        uses: actions/github-script@v5
        with:
          script: |
            // Open a next issue
            github.rest.issues.update({
              owner: "bryant-github-universe-2021",
              repo: "GitHubUniverse2021-NA",
              issue_number: context.issue.number + 1,
              state: "open"
            })
            
      - name: Comment on this issue
        uses: actions/github-script@v5
        with:
          script: |
            // comment on this issue
            github.rest.issues.createComment({
              owner: "bryant-github-universe-2021",
              repo: "GitHubUniverse2021-NA",
              issue_number: context.issue.number,
              body: "Move to the next issue [" + context.payload.issue.title + "](" + context.payload.issue.url + ")"
            })
            
            

            
            
